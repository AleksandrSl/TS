--- CMakeLists.txt	2014-05-02 09:29:49.000000000 -0400
+++ CMakeLists.txt	2014-05-08 09:24:10.000000000 -0400
@@ -27,13 +27,27 @@
 
 project(armadillo CXX)
 
-set(ARMA_USE_LAPACK    false)
-set(ARMA_USE_BLAS      false)
-set(ARMA_USE_ATLAS     false)
-set(ARMA_USE_HDF5      false)
-set(ARMA_USE_ARPACK    false)
+option(ARMA_USE_LAPACK "Use LAPACK libraries" OFF)
+mark_as_advanced(ARMA_USE_LAPACK)
+option(ARMA_USE_BLAS "Use BLAS libraries" OFF)
+mark_as_advanced(ARMA_USE_BLAS)
+option(ARMA_USE_ATLAS "Use ATLAS libraries" OFF)
+mark_as_advanced(ARMA_USE_ATLAS)
+option(ARMA_USE_BOOST "Use BOOST libraries" OFF)
+mark_as_advanced(ARMA_USE_BOOST)
+option(ARMA_USE_HDF5 "Use HDF5 libraries" OFF)
+mark_as_advanced(ARMA_USE_HDF5)
+# set this to false if you prefer to directly link with LAPACK and/or BLAS (eg. -llapack -lblas) instead of -larmadillo
+option(ARMA_USE_WRAPPER "Use WRAPPER libraries" OFF)
+mark_as_advanced(ARMA_USE_WRAPPER)
+option(ARMA_USE_MKL "Use MKL libraries" OFF)
+mark_as_advanced(ARMA_USE_MKL)
+option(ARMA_USE_ACMLMP "Use ACMLMP libraries" OFF)
+mark_as_advanced(ARMA_USE_ACMLMP)
+option(ARMA_USE_ACML "Use ACML libraries" OFF)
+mark_as_advanced(ARMA_USE_ACML)
+
 set(ARMA_USE_CXX11_RNG false)
-set(ARMA_USE_WRAPPER   true )
 
 ## NOTE:
 ## Set ARMA_USE_WRAPPER to false if you're getting linking errors when compiling your programs,
@@ -77,13 +91,22 @@
 else()
   set(ARMA_OS unix)
   
-  include(ARMA_FindMKL)
-  include(ARMA_FindACMLMP)
-  include(ARMA_FindACML)
-  
-  message(STATUS "   MKL_FOUND   = ${MKL_FOUND}")
-  message(STATUS "ACMLMP_FOUND   = ${ACMLMP_FOUND}")
-  message(STATUS "  ACML_FOUND   = ${ACML_FOUND}")
+
+  if(ARMA_USE_MKL)
+    include(ARMA_FindMKL)
+    message(STATUS "MKL_FOUND     = ${MKL_FOUND}")
+  endif()
+
+  if(ARMA_USE_ACMLMP)
+    include(ARMA_FindACMLMP)
+    message(STATUS "ACMLMP_FOUND  = ${ACMLMP_FOUND}")
+  endif()
+
+  if(ARMA_USE_ACML)  
+    include(ARMA_FindACML)
+    message(STATUS "ACML_FOUND    = ${ACML_FOUND}")
+  endif()
+
   
   if(MKL_FOUND OR ACMLMP_FOUND OR ACML_FOUND)
     
@@ -222,13 +245,15 @@
 endif()
 
 
-find_package(HDF5)
-message(STATUS "HDF5_FOUND     = ${HDF5_FOUND}")
-# 
-if(HDF5_FOUND)
-  set(ARMA_USE_HDF5 true)
-  set(CMAKE_REQUIRED_INCLUDES ${CMAKE_REQUIRED_INCLUDES} ${HDF5_INCLUDE_DIRS})
-  set(ARMA_LIBS ${ARMA_LIBS} ${HDF5_LIBRARIES})
+if(ARMA_USE_HDF5 STREQUAL true)
+  find_package(HDF5)
+  message(STATUS "HDF5_FOUND     = ${HDF5_FOUND}")
+  # 
+  if(HDF5_FOUND)
+    set(ARMA_USE_HDF5 true)
+    set(CMAKE_REQUIRED_INCLUDES ${CMAKE_REQUIRED_INCLUDES} ${HDF5_INCLUDE_DIRS})
+    set(ARMA_LIBS ${ARMA_LIBS} ${HDF5_LIBRARIES})
+  endif()
 endif()
 
 
@@ -247,11 +272,11 @@
 message(STATUS "")
 
 
-if(CMAKE_CXX_COMPILER_ID STREQUAL "GNU" AND NOT ${CMAKE_CXX_COMPILER_VERSION} VERSION_LESS 4.9)
-  set(ARMA_USE_CXX11_RNG true)
-  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
-  message(STATUS "Detected gcc 4.9 or later. Added '-std=c++11' to compiler flags")
-endif()
+#if(CMAKE_CXX_COMPILER_ID STREQUAL "GNU" AND NOT ${CMAKE_CXX_COMPILER_VERSION} VERSION_LESS 4.9)
+#  set(ARMA_USE_CXX11_RNG true)
+#  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
+#  message(STATUS "Detected gcc 4.9 or later. Added '-std=c++11' to compiler flags")
+#endif()
 
 
 message(STATUS "Copying ${PROJECT_SOURCE_DIR}/include/ to ${PROJECT_BINARY_DIR}/build_tmp/include/")
--- include/armadillo_bits/fn_norm.hpp	2013-02-21 20:00:53.000000000 -0500
+++ include/armadillo_bits/fn_norm.hpp	2013-04-05 16:02:03.293356218 -0400
@@ -530,6 +530,7 @@
         return T(0);
       }
     }
+  return T(0);
   }
 
 
#--- include/armadillo_bits/unwrap.hpp	2013-02-28 02:58:00.000000000 -0500
#+++ include/armadillo_bits/unwrap.hpp	2013-04-05 16:03:44.301359941 -0400
#@@ -1601,6 +1601,7 @@
#     //, ref( A )
#     {
#     arma_extra_debug_sigprint();
#+    arma_ignore(B);
#     }
#   
#   arma_hot arma_inline eT get_val() const { return eT(1); }
