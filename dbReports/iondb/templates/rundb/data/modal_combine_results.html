{% load static from staticfiles %}
<div id="modal_combine_results" title="" class="modal hide">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3>Combine Selected</h3>
    </div>
    <div class="modal-body">
        <div id="modal-error-messages" class="alert alert-error" style="display:none;"></div>
        <form class="form-horizontal" id="modal_combine_results_form" action="{{action}}">
            <fieldset>
                <div class="control-group">
                    <label for="input01" class="control-label">New Report Name</label>
                    <div class="controls">
                        <input value="" name="name" id="name" class="input-xlarge textInput required validateAlphaNumNoSpace" maxlength="128" type="text">
                        <p class="help-block"></p>
                    </div>
                </div>
                <div class="control-group">
                    <label for="mark_duplicates" class="control-label"> Mark as Duplicates Reads
                        <br></label>
                    <div class="controls">
                        <input name="mark_duplicates" id="mark_duplicates" type="checkbox">
                    </div>
                </div>
                {% if warnings %}
                <div id="warnings" class="alert alert-error">
                    <font color="red">
                        <p class="form-label">
                            WARNINGS
                        </p>
                        <ul>
                            {% for warning in warnings %}
                            <li>
                                {{warning}}
                            </li>
                            {% endfor %}
                        </ul> </font>
                </div>
                {% endif %}
                <div>
                    <table id="results_table">
                        <thead>
                            <tr>
                                <th data-field="selected" width=5%></th>
                                <th data-field="name" width=50%>Name</th>
                                <th data-field="tmap">TMAP</th>
                                <th data-field="alignment">Alignment</th>
                                <th data-field="barcode">Barcode</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for result in selected_results %}
                            <tr>
                                <td>
                                <input type="checkbox" id="selected_results" name="selected_results" checked="checked" value="{{result.id}}">
                                </td>
                                <td>{{result.resultsName}}</td>
                                <td>{{result.tmap_version}}</td>
                                <td>{{result.alignment_version}}</td>
                                <td>{{result.barcodeId}}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <br>
                <b>
                <p>
                    Please check the project page after launching.
                </p>
                <p>
                    Combined reports are NOT accessible from Completed Runs & Results page.
                </p></b>
            </fieldset>
        </form>
    </div>
    <div class="modal-footer">
        <a class="btn" href="#" data-dismiss="modal">Cancel</a>
        <a class="btn btn-primary hide" href="#">Launch</a>
    </div>

    <script type="text/javascript" src="{% static "resources/uni-form/js/uni-form-validation.jquery.js"%}"></script> <!-- Using updated uni-form JS -->
    <script type="text/javascript" src="{% static "jquery/js/jquery.form.js"%}"></script>
    <script type="text/javascript" src="{% static "runliveness.min.js"%}"></script>
    <script type="text/javascript">
    TB.data.modal_combine_results.ready('{{method}}');
    </script>
</div>
