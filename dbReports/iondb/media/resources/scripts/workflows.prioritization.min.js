(function(e,t){function i(e){this.dialogEl=e,this.configurationWidget=null,this.activeSettingName=null}var n=t.SliderWidget,r=t.SelectWidget;i.prototype.init=function(t){this.dialogEl=t;if(this._init)return;this._parseOptions(),this._addEventHandlers(),e(this.dialogEl).find("#settingDatumSelector").trigger("change"),this._init=!0},i.prototype._parseOptions=function(){var t=this,n=this.dialogEl.find("#settingDatumSelector option");t.filterOptions=[],e.each(n,function(n,r){var i=e(r),s=i.data("options");s.label=i.text(),i.data("optionIndex",n),t.filterOptions.push(s)})},i.prototype._addEventHandlers=function(){var t=this;this.dialogEl.on("change","#settingDatumSelector",e.proxy(this.onFilterTypeChange,this)),this.dialogEl.on("click",".btn-primary",function(e){e.preventDefault(),t.dialogEl.find("form").submit()}),this.dialogEl.on("submit","form",e.proxy(this.onFormSubmit,this))},i.prototype.onFormSubmit=function(t){t.preventDefault();var n=e("#prioritization-setting-template").text(),r=e(n);r.find(".setting-name").text(this.activeSettingName),r.find(".setting-value").text(this.configurationWidget.getSettingValue()),r.appendTo("#prioritizationList"),e("#addPrioritizationDialog").modal("hide")},i.prototype.onFilterTypeChange=function(t){var i=e(t.target),s=e(i.children()[i[0].selectedIndex]),o=s.data("options");this.configurationWidget&&(this.configurationWidget.destroy(),this.configurationWidget=null),this.activeSettingName=s.text();var u=e("#addPrioritizationDialog #filterInstanceCreateFields");console.log("destinationEl",u),o["type"]=="slider"?this.configurationWidget=new n(u,o):o["type"]=="select"&&(this.configurationWidget=new r(u,o))},t.PrioritizationDialog=i})(jQuery,window);